sequenceDiagram
    participant UserUI as User UI
    participant SseSvc as SseService
    participant UserMsgSvc as UserMessageService
    participant GeodeCache as Geode Cache Service
    participant DB as Database

    UserUI->>+SseSvc: 1- Establishes SSE Connection
    Note over SseSvc: Handles connection registration in Geode regions...
    SseSvc-->>-UserUI: Pushes any pending messages via SSE
    
    UserUI->>+UserMsgSvc: 3- GET /api/user/messages (to populate inbox)
    Note over UserMsgSvc: 4- Begins complex fetch logic... 
    UserMsgSvc->>+GeodeCache: 5- Checks various Geode regions (user-messages-inbox, broadcast-content)
    alt Some regions have cache misses
        GeodeCache-->>UserMsgSvc: 
        UserMsgSvc->>+DB: 6- Queries database for required information
        DB-->>-UserMsgSvc: 
        UserMsgSvc->>GeodeCache: 7- Populates the missing Geode regions
    end
    GeodeCache-->>-UserMsgSvc: 
    UserMsgSvc-->>-UserUI: 8- Returns the complete and up-to-date inbox